import{T as m,d as se,c as u,o as A,a as G,e,F as te,i as ne,H as y,u as s,t as S,B as U,h as I,I as W,X as oe,_ as le,b as re,G as ie,s as M,L as ce,K as pe,w as de,v as Z,x as ee,y as fe,k as be,E as he,V as X,m as ue,q as _e}from"./index-414de006.js";import{I as we}from"./IncompleteAlert-b0334ff8.js";const ge=""+new URL("shadow-orbit-903cdd91.webp",import.meta.url).href,t="./imgs",me={Ca:t+"/persona/Ca.webp",Ev:t+"/persona/Ev.webp",In:t+"/persona/In.webp",He:t+"/persona/He.webp",Ex:t+"/persona/Ex.webp",Re:t+"/persona/Re.webp",Lo:t+"/persona/Lo.webp",Cr:t+"/persona/Cr.webp",En:t+"/persona/En.webp",Sa:t+"/persona/Sa.webp",Ma:t+"/persona/Ma.webp",Ru:t+"/persona/Ru.webp"},ye={Ca:t+"/persona/labels/Ca.webp",Ev:t+"/persona/labels/Ev.webp",In:t+"/persona/labels/In.webp",He:t+"/persona/labels/He.webp",Ex:t+"/persona/labels/Ex.webp",Re:t+"/persona/labels/Re.webp",Lo:t+"/persona/labels/Lo.webp",Cr:t+"/persona/labels/Cr.webp",En:t+"/persona/labels/En.webp",Sa:t+"/persona/labels/Sa.webp",Ma:t+"/persona/labels/Ma.webp",Ru:t+"/persona/labels/Ru.webp"},ve={Ca:t+"/self/Ca.webp",Ev:t+"/self/Ev.webp",In:t+"/self/In.webp",He:t+"/self/He.webp",Ex:t+"/self/Ex.webp",Re:t+"/self/Re.webp",Lo:t+"/self/Lo.webp",Cr:t+"/self/Cr.webp",En:t+"/self/En.webp",Sa:t+"/self/Sa.webp",Ma:t+"/self/Ma.webp",Ru:t+"/self/Ru.webp"},Se={Ca:t+"/self/labels/Ca.webp",Ev:t+"/self/labels/Ev.webp",In:t+"/self/labels/In.webp",He:t+"/self/labels/He.webp",Ex:t+"/self/labels/Ex.webp",Re:t+"/self/labels/Re.webp",Lo:t+"/self/labels/Lo.webp",Cr:t+"/self/labels/Cr.webp",En:t+"/self/labels/En.webp",Sa:t+"/self/labels/Sa.webp",Ma:t+"/self/labels/Ma.webp",Ru:t+"/self/labels/Ru.webp"},P={},Ee=[[m.Ca,m.Cr,m.En],[m.Ev,m.Ex,m.He],[m.In,m.Lo,m.Ma],[m.Re,m.Ru,m.Sa]];Ee.forEach((l,a)=>{l.forEach((r,i)=>{P[r]={x:i,y:a}})});const Ce={class:"result-image"},Re={class:"intro"},xe={class:"picture"},Ie=["src","alt"],Le=["src","alt"],ke={ref:"shadowEl",class:"part-large shadow"},He=["alt"],Me={class:"shadow-icon"},$e={class:"labels"},Te={class:"label-container"},We=["src"],Be={class:"label-container"},ze=["src"],Ae=se({__name:"ResultImage",props:{name:null,persona:null,self:null,shadow:null},setup(l){const a=l,r=u(()=>{const f=a.name?oe(a.name,8):null;if(!f)return f;let _=f[f.length-1]+"'";return _[_.length-2]!="s"&&(_+="s"),f[f.length-1]=_,f}),i=u(()=>a.self?ve[a.self.id]:null),d=u(()=>a.self?Se[a.self.id]:null),n=u(()=>a.persona?me[a.persona.id]:null),h=u(()=>a.persona?ye[a.persona.id]:null),g=u(()=>P[a.shadow.id||"Ev"]),c={margin:"3.2vw 0",width:"30vw",height:"3vw",color:"black",fontFamily:"Mulish",fontWeight:"lighter",fontSize:"0.9em",textAlign:"left",lineHeight:"100%"},C=Object.assign({},c,{fontWeight:"normal",fontSize:"1.1em"});return(f,_)=>{var L,k,H,$;return A(),G("div",Ce,[e("p",Re,[(A(!0),G(te,null,ne(s(r),(T,B)=>(A(),G("div",{key:B,class:"name",style:y(s(C))},S(T),5))),128)),e("div",{style:c},S(s(U)("intro-1")),1),e("div",{style:c},S(s(U)("intro-2")),1)]),e("div",xe,[e("img",{class:"part-large self",src:s(i),alt:(L=l.self)==null?void 0:L.labels.root},null,8,Ie),e("img",{class:"part-large persona",src:s(n),alt:(k=l.persona)==null?void 0:k.labels.root},null,8,Le),e("div",ke,[e("img",{class:"shadow-orbit",src:ge,alt:(H=l.shadow)==null?void 0:H.labels.root},null,8,He),e("div",Me,[I(W,{src:"shadow-icons.webp",alt:($=l.shadow)==null?void 0:$.labels.root,"x-sprites":3,"y-sprites":4,x:s(g).x,y:s(g).y},null,8,["alt","x","y"])])],512)]),e("div",$e,[e("div",Te,[e("img",{src:s(h),style:y({filter:"brightness(0)"})},null,12,We)]),e("div",Be,[e("img",{src:s(d),style:y({filter:"brightness(0)"})},null,12,ze)])])])}}});const Fe=le(Ae,[["__scopeId","data-v-35f878b6"]]);function ae(l,a,r=1){var L,k,H,$,T,B,F,z,j,V;const i=a.getBoundingClientRect(),d=i.x*r,n=i.y*r,h=i.width*r,g=i.height*r,c=a.style,C=(L=c.filter)==null?void 0:L.toString();if(C&&(l.filter=C),a.childElementCount==1&&((k=c.overflow)==null?void 0:k.toString())=="hidden"){const p=a.children[0];if(p.tagName=="IMG"){const b=p.getBoundingClientRect(),{naturalWidth:v,naturalHeight:w}=p,N=v*i.width/b.width,O=w*i.height/b.height,D=v*(i.x-b.x)/b.width,o=w*(i.y-b.y)/b.height;l.drawImage(p,D,o,N,O,d,n,h,g)}return}let f;switch(a.tagName){case"IMG":f=a,l.drawImage(f,d,n,h,g);return;case"DIV":let p=!1;const b=(H=c.backgroundColor)==null?void 0:H.toString();b&&b!="rgba(0, 0, 0, 0)"&&(l.fillStyle=b,p=!0);const v=($=c.borderWidth)==null?void 0:$.toString();if(v&&v!="0px"&&(l.strokeStyle=v.toString()||"black",p=!0),p){const w=Number.parseFloat(((T=c.borderRadius)==null?void 0:T.toString())||"0");w?(Ne(l,d,n,h,g,h*w),l.fill()):l.fillRect(d,n,h,g),l.fillStyle="none"}break}const{innerText:_}=a;if(a.childElementCount)for(let p=0;p<a.children.length;p++)ae(l,a.children[p],r);else if(_&&_.length){l.fillStyle=((B=c.color)==null?void 0:B.toString())||"black";const b=Number.parseFloat(c.fontSize)*r*20,v=[(F=c.fontStyle)==null?void 0:F.toString(),(z=c.fontWeight)==null?void 0:z.toString(),b+"px",(j=c.fontFamily)==null?void 0:j.toString()].join(" ");l.font=v,l.textAlign=((V=c.textAlign)==null?void 0:V.toString())||"left";let w=0;switch(l.textAlign){case"center":w=h/2;break;case"right":w=h;break}l.fillText(_,d+w,n+b,h),l.fillStyle="none"}l.filter="none",l.globalCompositeOperation="source-over"}function Ne(l,a,r,i,d,n){return i<2*n&&(n=i/2),d<2*n&&(n=d/2),l.beginPath(),l.moveTo(a+n,r),l.arcTo(a+i,r,a+i,r+d,n),l.arcTo(a+i,r+d,a,r+d,n),l.arcTo(a,r+d,a,r,n),l.arcTo(a,r,a+i,r,n),l.closePath(),l}const Y=l=>(ue("data-v-9bdb3e74"),l=l(),_e(),l),Oe={class:"canvas-container"},De={class:"parts"},Pe={class:"part-container"},je={class:"part"},Ve={class:"part-container"},Ge={class:"part"},Ue={class:"part-container"},Xe={class:"part"},Ye={class:"shadow-part"},qe=Y(()=>e("br",null,null,-1)),Je={class:"parts"},Ke={class:"part-container"},Qe={class:"part"},Ze={class:"part-container"},es={class:"part"},ss={class:"part-container"},ts={class:"part"},ls={class:"shadow-part"},as=Y(()=>e("div",{class:"spacer"},null,-1)),ns=Y(()=>e("div",{class:"spacer"},null,-1)),os=se({__name:"ResultPage",setup(l){const a=re(),r=ie(),i=u(()=>r.lang),d=u(()=>a.regData.name),n=u(()=>a.progress.topArchetypes),h=u(()=>n.value.persona?X[n.value.persona]:null),g=u(()=>{var o;return P[((o=h.value)==null?void 0:o.id)||"Ev"]}),c=u(()=>n.value.self?X[n.value.self]:null),C=u(()=>{var o;return P[((o=c.value)==null?void 0:o.id)||"Ev"]}),f=u(()=>n.value.shadow?X[n.value.shadow]:null),_=u(()=>{var o;return P[((o=f.value)==null?void 0:o.id)||"Ev"]}),L=M(null),k=M(null),H=M(""),$=M(null),T=M(null),B=M(null),F=M(null),z=M(!1);ce(()=>{pe(()=>{B.value=document.getElementsByClassName("bg active")[0]||null,F.value=document.getElementsByClassName("part-large shadow")[0]||null;const o=[],R=setInterval(()=>{for(let E=0;E<o.length;E++){const x=o[E];x!=null&&x.complete&&x.naturalHeight&&(o.splice(E,1),E--)}o.length||(clearInterval(R),z.value=!0)},1e3)})}),de(z,(o,R)=>{!R&&o&&(j(),F.value.style.animationDuration="10s")});function j(){const o=k.value,R=o.getContext("2d"),E=L.value.getBoundingClientRect().width,x=o.clientWidth/E;R&&(R.fillStyle="#ffffff",R.fillRect(0,0,o.clientWidth,o.clientHeight),ae(R,T.value,x),H.value=o.toDataURL("image/png;base64"))}const V={color:"white",fontFamily:"Mulish",fontWeight:"normal",fontSize:"0.9em"},p={color:"white",fontFamily:"Mulish",fontWeight:"normal",fontSize:"0.7em",textAlign:"center",width:"100%"},b=Object.assign({},p,{fontStyle:"italic"}),v={color:"black",fontSize:"0.9em"},w=Object.assign({},p,v),N=Object.assign({},b,v),O={color:"white",fontFamily:"Mulish",fontWeight:"bold",fontSize:"0.7em",textAlign:"left",lineHeight:"140 %"},D={backgroundColor:"white",borderRadius:"50%"};return(o,R)=>(A(),Z(fe,{"inner-class":{result:!0}},{default:ee(()=>{var E,x,q,J,K,Q;return[e("div",{ref_key:"widthEl",ref:L,style:{width:"100vw"}},null,512),!s(d)||!s(h)||!s(c)||!s(f)?(A(),Z(we,{key:0,message:JSON.stringify({name:s(d),persona:s(h),self:s(c),shadow:s(f)},null,2)},null,8,["message"])):(A(),G(te,{key:1},[e("div",Oe,[e("canvas",{ref_key:"canvasEl",ref:k,width:1080,height:1920},null,512)]),e("div",{ref_key:"topEl",ref:$,class:"top"},[I(Fe,{name:s(d),persona:s(h),self:s(c),shadow:s(f)},null,8,["name","persona","self","shadow"])],512),e("div",{ref_key:"infoEl",ref:T,class:"info hidden-part"},[e("p",{style:V},"Your fusion"),e("div",De,[e("div",Pe,[e("span",{style:y(s(b))}," (persona) ",4),e("div",{class:"part-circle",style:D},[e("div",je,[I(W,{src:"elements-small.webp",alt:"Element 1","x-sprites":3,"y-sprites":4,x:s(g).x,y:s(g).y},null,8,["x","y"])])]),e("span",{style:p},S(((E=s(h))==null?void 0:E.labels.root)||""),1)]),e("div",Ve,[e("span",{style:y(s(b))}," (self) ",4),e("div",{class:"part-circle",style:D},[e("div",Ge,[I(W,{src:"elements-small.webp",alt:"Element 2","x-sprites":3,"y-sprites":4,x:s(C).x,y:s(C).y},null,8,["x","y"])])]),e("span",{style:p},S(((x=s(c))==null?void 0:x.labels.root)||""),1)]),e("div",Ue,[e("span",{style:y(s(b))}," (shadow) ",4),e("div",{class:"part-circle",style:D},[e("div",Xe,[e("div",Ye,[I(W,{src:"shadow-icons.webp",alt:"Element 3","x-sprites":3,"y-sprites":4,x:s(_).x,y:s(_).y},null,8,["x","y"])])])]),e("span",{style:p},S(((q=s(f))==null?void 0:q.labels.shadow[s(i)])||""),1)])]),e("div",{style:O},S(s(U)("date")),1),e("div",{style:O},S(s(U)("place")),1),qe,e("div",{style:O},"ourchetype.com")],512),e("div",Je,[e("div",Ke,[e("span",{style:y(s(N))}," (persona) ",4),e("div",Qe,[I(W,{src:"elements-small.webp",alt:"Element 1","x-sprites":3,"y-sprites":4,x:s(g).x,y:s(g).y},null,8,["x","y"])]),e("span",{style:y(s(w))},S(((J=s(h))==null?void 0:J.labels.root)||""),5)]),e("div",Ze,[e("span",{style:y(s(N))}," (self) ",4),e("div",es,[I(W,{src:"elements-small.webp",alt:"Element 2","x-sprites":3,"y-sprites":4,x:s(C).x,y:s(C).y},null,8,["x","y"])]),e("span",{style:y(s(w))},S(((K=s(c))==null?void 0:K.labels.root)||""),5)]),e("div",ss,[e("span",{style:y(s(N))}," (shadow) ",4),e("div",ts,[e("div",ls,[I(W,{src:"shadow-icons.webp",alt:"Element 3","x-sprites":3,"y-sprites":4,x:s(_).x,y:s(_).y},null,8,["x","y"])])]),e("span",{style:y(s(w))},S(((Q=s(f))==null?void 0:Q.labels.shadow[s(i)])||""),5)])]),as,I(he,{class:"cta",dark:"",disabled:!z.value,download:"Ourchetype.png",href:H.value},{default:ee(()=>[be(" Share ")]),_:1},8,["disabled","download","href"]),ns],64))]}),_:1}))}});const cs=le(os,[["__scopeId","data-v-9bdb3e74"]]);export{cs as default};
