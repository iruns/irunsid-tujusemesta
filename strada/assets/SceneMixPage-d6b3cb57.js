import{_ as P}from"./PageContainer.vue_vue_type_style_index_0_lang-93308ad1.js";import{S as T}from"./SlidingSelector-33073319.js";import{B}from"./BasicButton-c106fcf8.js";import{d as $,b as j,n as z,y as H,l as o,z as K,E as O,m as R,w,o as u,a as p,u as r,v as i,c as g,t as c,s as A,q as G,e as x,F as J,g as I,x as U,K as W,A as X}from"./index-b937dc07.js";import{g as Y,b as C,a as Z}from"./beansAndBlends-0ba2179c.js";import"./math-6b78f75a.js";const ee={ref:"interfaceEl",class:"interface"},se={key:0,class:"instruction"},te={ref:"questionsEl",class:"questions"},ne={class:"step-number"},ae={key:0,class:"question-text"},oe={class:"nav-row"},Q=4,re="scene-mix/area-3-icons.webp",pe=$({__name:"SceneMixPage",setup(ie){const _=j(),h=z(),N=H(),V=o(()=>N.lang),a=o(()=>U.currentRoute.value.meta.questionSettings||null),l=o(()=>{var e;return((e=a.value)==null?void 0:e.questionIdx)||0}),q=o(()=>{if(!a.value||l.value==null)return null;const e=[a.value];for(let t=1;t<(a.value.nQuestions||1);t++)e.push(Object.assign({},a.value,{questionIdx:l.value+t}));return e}),E=o(()=>{const e=[];if(a.value)for(let t=0;t<(a.value.nQuestions||1);t++)e.push(W[l.value+t]);return e}),M=o(()=>{var e;return((e=a.value)==null?void 0:e.nQuestions)||1}),d=o(()=>{let e=[];if(a.value){const t=X[a.value.areaIdx];for(let s=0;s<M.value;s++)e.push(t[l.value+s])}return e}),b=o(()=>q.value?q.value.map(e=>_.getQuestionHistory(e.areaIdx,e.questionIdx)):[]),m=o(()=>b.value.map((e,t)=>{const s=d.value[t].answers[e.sas[0]];if(s)return s.displayIdx!=null?s.displayIdx:s.idx||0})),F=o(()=>{for(let e=0;e<m.value.length;e++)if(m.value[e]==null)return!1;return!0});function L(e,t){const s=b.value[e];s.sas[0]=t,_.updateQuestionScores(s,d.value[e])}const v=K([]);return O(()=>{const e=d.value;let t=!1;for(let s=0;s<e.length;s++)if(e[s].answers.length>=Q){t=!0;break}if(h.isLimitingAnswers||(t=!1),t){const s=Y(4,Z,C,_.progress.scores);for(let n=0;n<e.length;n++){const y=e[n];if(y.answers.length<=Q)v.value[n]=e[n].answers;else{const S=[];v.value[n]=S;for(let f=0;f<s.length;f++){const D=C[s[f]],k=y.answers[D.idx];k.displayIdx=f,S.push(k)}}}}else for(let s=0;s<e.length;s++)v.value[s]=e[s].answers}),(e,t)=>(u(),R(P,{"inner-class":{"scene-mix-page":!0}},{default:w(()=>[p("div",ee,[r(i)("instruction")?(u(),g("div",se,c(r(i)("instruction")),1)):A("",!0),p("div",te,[p("div",ne,c(r(i)("number")),1),(u(!0),g(J,null,G(d.value,(s,n)=>(u(),g("div",{key:n,class:"question"},[r(i)("question")?(u(),g("p",ae,c(r(i)("question")),1)):A("",!0),x(T,{lang:V.value,idx:n,selection:m.value[n],"icons-src":re,"icons-y":l.value+n,answers:v.value[n],"show-answer-label":E.value[n].showAnswerLabel,"select-answer":L},null,8,["lang","idx","selection","icons-y","answers","show-answer-label"])]))),128))],512),p("div",oe,[x(B,{class:"back-button",secondary:"",onClick:r(h).onBack},{default:w(()=>[I(c("<<"))]),_:1},8,["onClick"]),x(B,{class:"next-button",disabled:!F.value},{default:w(()=>[I(c(r(i)("continue","general")),1)]),_:1},8,["disabled"])])],512)]),_:1}))}});export{pe as default};
