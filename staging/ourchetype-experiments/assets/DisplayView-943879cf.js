import{d as R,r as t,a as r,b as U,p as ye,o as y,c as S,f as o,n as l,F as Y,_ as $,w as pe,e as K,t as Q,u as T,g as me,m as Z,k as ge}from"./index-a58c3409.js";const ve="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAALCAYAAACZIGYHAAAACXBIWXMAABYvAAAWLwESJu8cAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAMtJREFUKJGV0jFOQkEQxvGfJETxAtjQGDvPQEFCpSfQWEOpp7IgnoBbSAHEAg1qS294yVq4L4Fh84hfMtns7sz/y+yOlJLdwDnGmOIbP3mdYoTOQU0A3OITqSHWuClCsnt1BFBHhdEeBMN/AOrYYpBScoI25riyrzWe8Y5L3KMXct5wDQ8Fl0l8QHTwUsi9U7hY4jT+QAadZfdo6CMcPpYAO6CnkL9qoRv6nGnWa9hftPzNRa0KiyOQRc6r9QV9rLDBuKmVMFObXNf/Be881/nIEOrEAAAAAElFTkSuQmCC",he="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAGCAYAAAAlvnXZAAAACXBIWXMAABYvAAAWLwESJu8cAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAIpJREFUGJWl0L8KgXEchfHPN9ks/sQuZbIrsboLmxswuw1XYnMRJoXhLYOyGV5i0s/yFosBp57l9HSGAwNkOGOOekrJJ1DGrPAzDAI7dL3ywBobnJAXfRNtjFB78/eBCyp+z7WEFvp/jCwgMMER6QtyTBFRnCUiShhijB46aKCKG+44YIsVlimlHJ41oD5APns5JAAAAABJRU5ErkJggg==",xe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAAgCAYAAACFM/9sAAAACXBIWXMAABYvAAAWLwESJu8cAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAA7dJREFUaIHtml9oW2UYh5/3S9Yc6ZxCK1KHimBF2MqEXCgISq+kpckpdcQ5L5QOGu8UvPAPSinixS7Vm9UxrBdbIWibnqSFihj0QlFKUZkoK5SK2MLYwDWdSW16Xi/aSJZ2bWLSnhzpA4F8/x9+kHPC932iqtSCiEhXV9fRYDDYBrSKSIuqtopIC9Cqqi1As6o2icidIhJU1SNAALgbkLIpi23bsQ4sl9W5wA1gXUSWVXVNVVdE5G/gpohcB66p6nURuaaqxfJiOp1e1BoDkErHx+PxQ0tLS4+p6nGgXUQeAdo3P3fUIuEhOWBORK64rju3+f1yW1vbD8PDw2uVTLBjgJFI5AQQEZFngDD+DapaciIyo6rTqppOpVI/3q7jlgC7u7uPBIPBfiAOPLrHon7hF+BcoVAYmZqauuUR8m+AIiKRSGQAeBe4Z/8dfcFVEXnHcZzzxWenqCqxWOxwPp//BOjzWNAXiMin+Xz+penp6ZtGRCSfz49wEF7FqOrJUCh0UUREotHoKVUd9VrKpzxnVDXutYWPiRugw2sLH9NhgJDXFj7GMsCC1xY+ZsEAX3ht4WM+NyJy0WsLH3PJTExMzKiq47WJ3xCRccdxZs1m4XU2diYOqIy/CoXCGwAGwHGcX0XkNW+d/IOqvjo5OXkFynZjotHoCPCiR15+4WPHcfqLBVPaYlnWGREZ338n35DKZrMDpRW3BJhIJNZDodALBy+VbUlms9lYJpMplFaa8l6JRCK3srLyLHBh39QaHFU9b1nWyUwmky9v23FL37btAVX9EGjaS8EGpgC87TjO2dt12PVQqbe393HXdUeBh+os1+jMq+rzqVTq+506bfkJl5NMJr8DjgNn2ThW/L+jwEeWZZ3YLTyo4lgTwLbtJ4H3VTVcg2AjM2OMeSWZTH5T6YCqAgQYGhoys7Ozp1X1PeCBag0blN+At1Kp1Gi1B+1VB1gkFos15XK5UyLyJv49/pwXkQ+Wl5eHt3vDVsJ/DrBILBYLrK6u9qnqy0AnW69qNBquqn4pIufC4fD44OCgW8tkNQdYim3bD7uu2y8ip4EH6zZxfVgALrmueyGdTs/Xa9K6BlhKT09P2BjTB9jAsT1ZZHcuAw7wmeM4s3uxwJ4FWIpt2/cCTwFPA0+o6jHAqvMyeRH52XXdb40xXwcCga/Gxsau1nmNLexLgOV0dnYGm5ub240xHWzc7roPuB84ysaVt8PAIeCuzSE3gDVgBfgT+AP4HVgE5oCfLMuaSyQS+/4/9R8iKoVHNt4CWgAAAABJRU5ErkJggg==";function G(C,a,s,v){return v&&(s=_e(0,1,s)),C+(a-C)*s}function _e(C,a,s){return Math.max(Math.min(s,a),C)}const Be={key:0,src:ve},we={key:1,src:he},Se={key:0,src:ve},Me={key:1,src:he},be=R({__name:"PersonFace",props:{size:{},lookAt:{},happiness:{},wonder:{},modEffectSource:{type:Function}},setup(C){const a=C,s=t(null),v=r(()=>a.size*.1),E=r(()=>1+a.wonder*5),A=r(()=>1+a.wonder),B=r(()=>1-a.wonder*.99),m=r(()=>a.size*.05),u=t({x:0,y:0});let x=-1,h=0,c=0;function _(){clearTimeout(x);let d=300+Math.random()*300;if(s.value){const w=a.lookAt,I=u.value;let n=h,i=c;if(typeof w=="number"){d*=G(.1,1,w);const M=Math.random();M>.6&&(M<G(.95,.65,w)?i=0:(i=.8,n=Math.random()*2*Math.PI))}else{i=1;const M=s.value.getBoundingClientRect(),X=M.x+M.width/2,H=M.y+M.height/2;n=Math.atan2(w.y-H,w.x-X)}h=n,c=i;const p=Math.cos(n),k=Math.sin(n);I.x=p*i,I.y=k*i}setTimeout(_,d)}const f=t(!1);let F=-1;function W(d){d?(f.value=!1,clearTimeout(F)):F=setTimeout(()=>{f.value=!f.value,W()},f.value?200:1e4*(.1+Math.random()))}const V=r(()=>a.happiness>=.5);return U(()=>{_(),W()}),ye(()=>{clearTimeout(F)}),(d,w)=>(y(),S("div",{class:"face",style:l({width:d.size+"px",height:d.size+"px",filter:"brightness(1.3)"})},[o("div",{ref_key:"eyesEl",ref:s,class:"eyes animated",style:l({width:"70%",left:"15%",top:"40%",transform:`translate(
          ${u.value.x*m.value}px,
          ${u.value.y*m.value}px)`})},[o("div",{class:"eye animated",style:l({width:v.value+"px",height:v.value+"px",transform:`scale(${E.value})`})},[V.value?(y(),S("img",Be)):f.value&&!d.wonder?(y(),S("img",we)):(y(),S(Y,{key:2},[o("div",{class:"eye-white animated",style:l({transform:`scale(${A.value})`})},null,4),o("div",{class:"eye-dot animated",style:l({transform:`translate(
              ${u.value.x*m.value*.4}px,
              ${u.value.y*m.value*.4}px)
              scale(${B.value})`})},null,4)],64))],4),o("div",{class:"eye animated",style:l({width:v.value+"px",height:v.value+"px",transform:`scale(${E.value})`})},[V.value?(y(),S("img",Se)):f.value&&!d.wonder?(y(),S("img",Me)):(y(),S(Y,{key:2},[o("div",{class:"eye-white animated",style:l({transform:`scale(${A.value})`})},null,4),o("div",{class:"eye-dot animated",style:l({transform:`translate(
              ${u.value.x*m.value*.5}px,
              ${u.value.y*m.value*.5}px)
              scale(${B.value})`})},null,4)],64))],4)],4),o("div",{class:"mouth animated",style:l({width:"60%",height:"30%",left:"20%",bottom:"10%",transform:`
          translate(
          ${u.value.x*m.value}px,
          ${u.value.y*m.value}px)
          scaleX(${Math.max(d.happiness,d.wonder**1.2)})
          scaleY(${Math.max(d.happiness,d.wonder)})`})},w[0]||(w[0]=[o("img",{src:xe},null,-1)]),4)],4))}});const Ce=$(be,[["__scopeId","data-v-afe843ad"]]),Ee={class:"centered-container top"},ke={class:"name"},Fe=["src"],We={class:"centered-container"},Ve=R({__name:"PersonaSet",props:{gridCoords:{},size:{},happiness:{},wonder:{},group:{},name:{},isFocus:{type:Boolean},modEffectSource:{type:Function}},setup(C){const a="./",s=C,v={vision:{label:"Visionary",speech:["Let's see","the many paths","ahead!"],color:"#aa0000"},joy:{label:"Muse",speech:["Let's find","joy!"],color:"#3297ce"},rule:{label:"Guardian",speech:["Let's move","methodically"],color:"#4d4d4d"},connection:{label:"Friend",speech:["Let's","hang out!"],color:"#ef59b1"}},E=t(3),A=r(()=>s.size*E.value),B=r(()=>s.size*((E.value-1)/2)),m=r(()=>`scaleX(${s.gridCoords.x>3?-1:1}) scaleY(${s.gridCoords.y<2?-1:1})`),u=r(()=>v[s.group]),x=t(null);return pe(()=>s.group,h=>{x.value&&s.modEffectSource(x.value,!0);const c=x.value={coords:s.gridCoords,attraction:.1,range:2.5};switch(h){case"connection":c.happiness=.5,c.attraction=.6;break;case"joy":c.happiness=.9,c.range=3.5;break;case"rule":c.spirit=.6,c.lookAt={x:1/0,y:0};break;case"vision":c.wonder=.5,c.lookAt=.5;break}s.modEffectSource(x.value)},{immediate:!0}),K(()=>{x.value&&s.modEffectSource(x.value,!0)}),(h,c)=>(y(),S("div",{class:"persona-set",style:l({width:A.value+"px",height:A.value+"px",transform:`translate(
      ${-B.value}px,
      ${-B.value}px)`,fontSize:A.value*.15+"px"})},[o("div",Ee,[o("div",ke,Q(h.name),1)]),o("img",{class:"image",src:T(a)+"persona/persona-"+h.group+".png"},null,8,Fe),o("div",We,[o("div",{class:"label",style:l({color:u.value.color})},Q(u.value.label),5)]),o("div",{class:"speech-container",style:l({transform:m.value})},[o("div",{class:"speech animated",style:l({transform:`scale(${h.isFocus?1:0})`})},[o("div",{class:"stem",style:l({backgroundColor:u.value.color})},null,4),o("div",{class:"bubble",style:l({backgroundColor:u.value.color,transform:m.value})},[(y(!0),S(Y,null,me(u.value.speech,(_,f)=>(y(),S("div",{key:f,class:"line"},Q(_),1))),128))],4)],4)],4)],4))}});const Xe=$(Ve,[["__scopeId","data-v-9850f6fb"]]),Pe={class:"expression animated"},Te=.4,Le=R({__name:"PersonBase",props:{tWidth:{},tHeight:{},gridSizeBase:{},personParams:{},march:{},sources:{},focus:{},modEffectSource:{type:Function}},setup(C){const a=C,s={x:a.gridSizeBase.x*a.tWidth,y:a.gridSizeBase.y*a.tHeight};function v(e){return e*s.x}function E(e){return e*s.y}const A=v(Te),B=r(()=>a.personParams.coords),m=r(()=>({x:v(B.value.x+.5),y:E(B.value.y+.5)})),u=r(()=>{const e=a.focus,{x:P,y:L}=B.value;return!!e&&P==e.x&&L==e.y}),x=r(()=>{const e=a.personParams.persona;return(e==null?void 0:e.group)&&(e==null?void 0:e.name)}),h=t(0),c=t(0),_=t(0),f=t(0);let F=t(0);const W=t({x:0,y:0});let V=setInterval(()=>{const{sources:e,personParams:P}=a,{x:L,y:J}=P.coords;c.value/=1.1,_.value/=1.1,f.value/=1.1;const D=W.value;D.x=0,D.y=0;let N=0,j=0;for(let q=0;q<e.length;q++){const{coords:ee,range:ae,spirit:se,wonder:te,happiness:oe,attraction:ne,friendliness:le,lookAt:Ae}=e[q],re=J-ee.y,ce=L-ee.x,ie=Math.sqrt(re**2+ce**2);if(ie>=ae)continue;const z=1-ie**.8/ae,O=z*.1;let b=0;if(se){const g=se*z;b=Math.max(b,g),h.value+=g*O,h.value=Math.min(1,h.value)}if(te){const g=te*z;b=Math.max(b,g),c.value+=g*O,c.value=Math.min(1,c.value)}if(oe){const g=oe*z;b=Math.max(b,g),_.value+=g*O,_.value=Math.min(1,_.value)}if(le){const g=le*z;b=Math.max(b,g),f.value+=g*O,f.value=Math.min(1,f.value)}if(ne){const g=ne*z;b=Math.max(b,g),D.x-=ce*g,D.y-=re*g}b>j&&(j=b,N=Ae||0)}F.value=N},500);t({x:0,y:0}),t(0),pe(_,e=>{});const d=r(()=>G(.03,.1,a.march+h.value,!0)*G(.8,1,Math.random())),w=r(()=>G(.05,.2,a.march,!0)*G(.8,1,Math.random())),I=r(()=>G(1,.5,a.march+h.value,!0)*G(.8,1,Math.random())),n=t({x:0,y:0}),i=t(1),p=t(1),k=t("linear"),M=t("linear");let X=-1;function H(){const e=I.value,P=e/2,L=n.value,J=w.value;L.x=J,i.value=e,L.y=-d.value,p.value=P,M.value="ease-out",clearTimeout(X),X=setTimeout(()=>{L.y=0,M.value="ease-in",p.value=P,clearTimeout(X),X=setTimeout(()=>{L.x=-J,i.value=e,clearTimeout(X),X=setTimeout(H,e*1e3)},P*1e3)},P*1e3)}function fe(){clearTimeout(X);const e=n.value;e.x=0,e.y=0,M.value="ease-out",p.value=.1}return U(()=>{H()}),K(()=>{fe(),clearInterval(V)}),(e,P)=>(y(),S("div",{class:"person-base animated",style:l({transform:`translate(${m.value.x}px, ${m.value.y}px)`,zIndex:x.value?u.value?3:2:0})},[o("div",{class:"person animated",style:l({width:T(A)+"px",height:T(A)+"px",left:-T(A)/2+"px",top:-T(A)/2+"px"})},[o("div",{class:"lean animated",style:l({transform:`translate(
          ${v(W.value.x)}px,
          ${E(W.value.y)}px)`,transitionDuration:"5s"})},[o("div",{class:"march-x animated",style:l({transform:`translate(
            ${v(n.value.x)}px)`,transitionTimingFunction:k.value,transitionDuration:i.value+"s"})},[o("div",{class:"march-y animated",style:l({transform:`translateY(
              ${v(n.value.y)}px)`,transitionTimingFunction:M.value,transitionDuration:p.value+"s"})},[o("div",Pe,[x.value?(y(),Z(Xe,{key:1,"grid-coords":B.value,size:T(A),"look-at":T(F),wonder:c.value,happiness:_.value,group:e.personParams.persona.group,name:e.personParams.persona.name,"is-focus":u.value,"mod-effect-source":e.modEffectSource},null,8,["grid-coords","size","look-at","wonder","happiness","group","name","is-focus","mod-effect-source"])):(y(),Z(Ce,{key:0,size:T(A),"look-at":T(F),wonder:c.value,happiness:_.value,"mod-effect-source":e.modEffectSource},null,8,["size","look-at","wonder","happiness","mod-effect-source"]))])],4)],4)],4)],4)],4))}});const Ge=$(Le,[["__scopeId","data-v-0dfaa1f8"]]),ue=7,de=5,Ie=R({__name:"DisplayView",setup(C){const a=t(0),s=t(0),v=r(()=>.05*a.value),E=r(()=>.09*s.value),A=r(()=>a.value+v.value*2),B=r(()=>s.value+E.value*2),m=t([{group:"connection",name:"name name name name 1"},{group:"joy",name:"name 2"},{group:"rule",name:"name 3"},{group:"vision",name:"name 4"},{group:null,name:""},{group:null,name:""}]),u=m.value;let x=0;setTimeout(()=>{m.value[4].group="rule",m.value[4].name="name 5"},2e3);const h=t([]),c=h.value;for(let n=0;n<de;n++)for(let i=0;i<ue;i++){let p=null;n%2&&i%2&&(p=u[x],x++),c.push({coords:{x:i,y:n},persona:p})}let _=-1;U(()=>{a.value=document.documentElement.clientWidth,s.value=document.documentElement.clientHeight});const f=t([]);function F(n,i){const p=f.value;if(!i)p.push(n);else{const k=p.indexOf(n);k>=0&&p.splice(k,1)}}const W=r(()=>{let n=.05;const i=f.value;for(let p=0;p<i.length;p++){const{spirit:k}=i[p];k&&(n+=k*.2)}return n}),V=t(0);let d=-1;function w(){clearTimeout(d),V.value-=W.value*3,V.value<-200&&(V.value+=400),d=setTimeout(w,200)}const I=t({x:1,y:1});return setTimeout(()=>{I.value.x=3},1e3),U(()=>{w()}),K(()=>{clearTimeout(d),clearTimeout(_)}),(n,i)=>a.value?(y(),S("div",{key:0,class:"persona-view",style:l({width:"100vw",height:"100vh",backgroundPositionX:V.value+"vw"})},[o("div",{class:"container",style:l({width:A.value+"px",height:B.value+"px",transform:`translate(${-v.value}px,${-E.value}px)`})},[(y(!0),S(Y,null,me(h.value,(p,k)=>(y(),Z(Ge,{key:k,"t-width":A.value,"t-height":B.value,"grid-size-base":{x:1/ue,y:1/de},"person-params":p,march:W.value,sources:f.value,focus:I.value,"mod-effect-source":F},null,8,["t-width","t-height","grid-size-base","person-params","march","sources","focus"]))),128))],4)],4)):ge("",!0)}});const He=$(Ie,[["__scopeId","data-v-d31fa9b5"]]);export{He as default};
