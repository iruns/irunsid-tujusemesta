import{d as oe,c as h,o as ie,a as de,e,y as v,u as l,t as g,x as S,_ as re,K as Y,O as b,b as ue,s as fe,N as pe,Q as ge,v as C,B as ve,A as he,w as me,D as _e,G as Q,S as ye,i as H,m as be,h as ae,H as le,M as $}from"./index-5dc18db1.js";import{_ as we}from"./PageContainer.vue_vue_type_style_index_0_lang-9fc4ebed.js";import{s as Se,a as ke,p as Ce,b as Ie,i as q}from"./images-5812a85c.js";import{_ as Z}from"./SpriteSheetImg.vue_vue_type_script_setup_true_lang-784069b1.js";const Ee={class:"result-image"},Pe={class:"intro"},Ae={class:"labels"},Re={class:"picture"},Ne=["src","alt"],We=["src","alt"],je=oe({__name:"ResultImage",props:{name:{},persona:{},self:{}},setup(t){const a=t,o=h(()=>a.self?Se[a.self.id]:null);h(()=>a.self?ke[a.self.id]:null);const c=h(()=>a.persona?Ce[a.persona.id]:null);h(()=>a.persona?Ie[a.persona.id]:null);const u={color:"#333",fontFamily:"PP Neue Machina Plain",fontWeight:"lighter",fontSize:"0.9rem",textAlign:"center",lineHeight:"100%"},d={color:"#333",fontFamily:"PP Neue Machina Inktrap",fontSize:"2rem",textAlign:"center",lineHeight:"100%",textTransform:"uppercase"},_=Object.assign({},u,{fontWeight:"bold"});return(r,w)=>{var i,E;return ie(),de("div",Ee,[e("div",Pe,[e("div",{style:v(l(_))},g(r.name),5),e("div",{style:u},g(", "+l(S)("intro")),1)]),e("div",Ae,[e("p",{style:d},g(r.persona.labels.persona),1),e("p",{style:d},g(r.self.labels.self),1)]),e("div",Re,[e("img",{class:"part-large self",src:o.value,alt:(i=r.self)==null?void 0:i.root},null,8,Ne),e("img",{class:"part-large persona",src:c.value,alt:(E=r.persona)==null?void 0:E.root},null,8,We)])])}}});const Le=re(je,[["__scopeId","data-v-5e1ff4e7"]]);function Fe(t,a){return new Promise((o,c)=>{t.onload=()=>o(t.height),t.onerror=c,t.src=a})}async function V(t,a,o,c=1){var W,z,j,x,K,J,L,F,B,D,O,P;const u=o.getBoundingClientRect(),d=(u.x-a.x)*c,_=(u.y-a.y)*c,r=u.width*c,w=u.height*c,i=o.style;if(i.opacity==="0")return;const E=(W=i.filter)==null?void 0:W.toString();if(E&&(t.filter=E),i.boxShadow&&i.boxShadow.length){const m=i.boxShadow.replace(/, /g,",").split(" ");t.shadowColor=m[0],t.shadowOffsetX=X(m[1],c),t.shadowOffsetY=X(m[2],c),t.shadowBlur=X(m[3],c)}if(o.childElementCount==1&&((z=i.overflow)==null?void 0:z.toString())=="hidden"){const m=o.children[0];if(m.tagName=="IMG"){const f=m.getBoundingClientRect(),{naturalWidth:k,naturalHeight:y}=m,R=k*u.width/f.width,A=y*u.height/f.height,T=k*(u.x-f.x)/f.width,M=y*(u.y-f.y)/f.height;t.drawImage(m,T,M,R,A,d,_,r,w)}}else{if(r&&w){let f;switch(o.tagName){case"IMG":f=o,t.drawImage(f,d,_,r,w);return;case"DIV":let k=!1;const y=(j=i.backgroundColor)==null?void 0:j.toString();y&&y!="rgba(0, 0, 0, 0)"&&(k=!0);const R=(x=i.borderWidth)==null?void 0:x.toString();R&&R!="0px"&&(t.strokeStyle=R.toString()||"black",k=!0),(K=i.maskImage)==null||K.toString();const A=(J=i.backgroundImage)==null?void 0:J.toString();if(k){const T=Number.parseFloat(((L=i.borderRadius)==null?void 0:L.toString())||"0");if(T)Be(t,d,_,r,w,r*T),t.fillStyle=y,t.fill();else if(t.fillStyle=y,t.fillRect(d,_,r,w),A){const M=new Image(r,w);await Fe(M,A.replace(/url|\(|\)|"/g,"")),t.drawImage(M,d,_,r,w)}t.fillStyle="none"}break}}const{innerText:m}=o;if(!o.childElementCount&&m&&m.length){t.fillStyle=((F=i.color)==null?void 0:F.toString())||"black";const f=X(i.fontSize,c*17),k=[(B=i.fontStyle)==null?void 0:B.toString(),(D=i.fontWeight)==null?void 0:D.toString(),f+"px",(O=i.fontFamily)==null?void 0:O.toString()].join(" ");t.font=k,t.textAlign=((P=i.textAlign)==null?void 0:P.toString())||"left";let y=0;switch(t.textAlign){case"center":y=r/2;break;case"right":y=r;break}t.fillText(m,d+y,_+f,r),t.fillStyle="none"}if(t.shadowColor="rgba(0,0,0,0)",o.childElementCount)for(let f=0;f<o.children.length;f++)await V(t,a,o.children[f],c)}t.filter="none"}function X(t,a){return t=t.replace("px",""),parseFloat(t)*a}function Be(t,a,o,c,u,d){return c<2*d&&(d=c/2),u<2*d&&(d=u/2),t.beginPath(),t.moveTo(a+d,o),t.arcTo(a+c,o,a+c,o+u,d),t.arcTo(a+c,o+u,a,o+u,d),t.arcTo(a,o+u,a,o,d),t.arcTo(a,o,a+c,o,d),t.closePath(),t}const De={[Y.He]:{work:{[b.en]:"Kunjungi furniture ini di area Gedung CADL",[b.id]:"Kunjungi furniture ini di area Gedung CADL"},name:"Nama Problem Solver",date:{[b.en]:"Jumat, 30 Sept 2004",[b.id]:"Friday, 30 Sept 2004"}},[Y.Cr]:{work:{[b.en]:"Kunjungi furniture ini di area Gedung CADL",[b.id]:"Kunjungi furniture ini di area Gedung CADL"},name:"Nama Creator",date:{[b.en]:"Jumat, 30 Sept 2004",[b.id]:"Friday, 30 Sept 2004"}},[Y.Sa]:{work:{[b.en]:"Kunjungi furniture ini di area Gedung CADL",[b.id]:"Kunjungi furniture ini di area Gedung CADL"},name:"Nama Conceptor",date:{[b.en]:"Jumat, 30 Sept 2004",[b.id]:"Friday, 30 Sept 2004"}}},Oe={class:"canvas-container"},Te=["width","height"],Me={class:"parts"},Ge={class:"part-container"},He={class:"part"},$e={class:"part-container"},ze={class:"part"},xe={class:"part-container"},Ke={class:"part"},Je={class:"shadow-part"},Ve={class:"instructions"},Xe={class:"details-container"},Ue={class:"details"},Ye={class:"section"},Qe={class:"title"},qe={class:"self-title"},Ze={class:"section"},et={class:"title"},tt=["src","alt"],st={class:"section"},nt={class:"title"},at=oe({__name:"ResultPage",setup(t){const a="./imgs",o=ue(),c=fe();pe();const u=ge();h(()=>c.lang);const d=h(()=>u.regData.name),_=h(()=>o.resultData.topArchetypes),r=h(()=>_.value.persona?$[_.value.persona]:$.Ev),w=h(()=>{var s;return q[((s=r.value)==null?void 0:s.id)||"Ev"]});h(()=>{var s;return De[((s=r.value)==null?void 0:s.id)||"He"]});const i=h(()=>_.value.self?$[_.value.self]:$.Ev),E=h(()=>{var s;return q[((s=i.value)==null?void 0:s.id)||"Ev"]}),W=h(()=>_.value.shadow?$[_.value.shadow]:$.Ev),z=h(()=>{var s;return q[((s=W.value)==null?void 0:s.id)||"Ev"]}),j=h(()=>i.value.self.color),x=C(null),K=C(null),J=C(""),L=C(null),F=C(null),B=C(null),D=C(null),O=C(!1);function P(s,n){if(s.tagName=="IMG")n.push(s);else for(let p=0;p<s.children.length;p++)P(s.children[p],n)}ve(()=>{he(()=>{const s=[];P(D.value,s),P(L.value,s),P(B.value,s),P(F.value,s);const n=setInterval(()=>{for(let p=0;p<s.length;p++){const I=s[p];I!=null&&I.complete&&I.naturalHeight&&(s.splice(p,1),p--)}s.length||(clearInterval(n),O.value=!0)},1e3)})}),me(O,(s,n)=>{!n&&s&&R()});const m=C(1080),f=C(1920),k=h(()=>window.innerWidth),y=h(()=>window.innerWidth*f.value/m.value);async function R(){const s=K.value,n=s.getContext("2d"),p=x.value.getBoundingClientRect(),I=p.width,N=s.clientWidth/I;n&&(await V(n,p,D.value,N),await V(n,p,L.value,N),await V(n,p,B.value,N),await V(n,p,F.value,N),n.globalCompositeOperation="destination-over",n.fillStyle="white",n.fillRect(0,0,s.clientWidth,s.clientHeight),J.value=s.toDataURL("image/png;base64"))}const A={color:"#444",fontFamily:"PP Neue Machina Plain",fontSize:"0.8rem",textAlign:"center"},T=Object.assign({},A,{fontSize:"1rem"}),M=Object.assign({},A,{fontStyle:"italic"}),ee={color:"black"},G=Object.assign({},A,ee);Object.assign({},M,ee);const U={color:"#444",fontFamily:"PP Neue Machina Plain",fontSize:"0.7rem",textAlign:"center",lineHeight:"120 %",transform:"scaleX(1.5)"},te=Object.assign({},U,{fontSize:"0.7rem",fontWeight:"normal"}),se=Object.assign({},U,{fontFamily:"PP Neue Machina Inktrap",fontSize:"0.7rem",fontWeight:"normal"}),ce=Object.assign({},U,{fontFamily:"PP Neue Machina Inktrap",fontSize:"0.9rem",fontWeight:"normal"});return(s,n)=>(ie(),_e(we,{"inner-class":{result:!0}},{default:Q(()=>{var p,I,N,ne;return[e("div",{ref_key:"bgEl",ref:D,class:"bg-el hidden-part",style:v({"background-image":`url(${l(a)}/result-bg.webp)`,"background-color":i.value.self.color,height:100*y.value/k.value+"vw"})},null,4),e("div",{ref_key:"anchorEl",ref:x,style:{width:"100vw"}},null,512),e("div",Oe,[e("canvas",{ref_key:"canvasEl",ref:K,width:m.value,height:f.value},null,8,Te)]),e("div",{ref_key:"topEl",ref:L,class:"top"},[n[0]||(n[0]=e("img",{class:"logo",src:ye,alt:"Mempertemukan Jakarta"},null,-1)),H(Le,{name:d.value||"?",persona:r.value,self:i.value},null,8,["name","persona","self"])],512),e("div",{ref_key:"partsEl",ref:F,class:"parts-container"},[e("div",{style:v(l(T))},g(l(S)("fusion")),5),e("div",Me,[e("div",Ge,[e("span",{class:"top",style:v(l(G))},g(((p=l(be)[r.value.id])==null?void 0:p.label)||""),5),e("div",He,[H(Z,{src:"elements-small.webp",alt:"Element 1","x-sprites":3,"y-sprites":4,x:w.value.x,y:w.value.y},null,8,["x","y"])]),e("span",{style:v(l(G))}," Persona ",4)]),e("div",$e,[e("span",{class:"top",style:v(l(G))},g(((I=i.value)==null?void 0:I.root)||""),5),e("div",ze,[H(Z,{src:"elements-small.webp",alt:"Element 3","x-sprites":3,"y-sprites":4,x:E.value.x,y:E.value.y},null,8,["x","y"])]),e("span",{style:v(l(G))}," Self ",4)]),e("div",xe,[e("span",{class:"top",style:v(l(G))},g(((N=W.value)==null?void 0:N.shadow.label.en)||""),5),e("div",Ke,[e("div",Je,[H(Z,{src:"shadow-icons.webp",alt:"Element 2","x-sprites":3,"y-sprites":4,x:z.value.x,y:z.value.y},null,8,["x","y"])])]),e("span",{style:v(l(G))}," Shadow ",4)])]),e("div",{ref_key:"infoEl",ref:B,class:"info hidden-part"},[e("div",{style:v(l(ce))},g(l(S)("title")),5),e("div",{style:v(l(se))},g(l(S)("subtitle")),5),n[1]||(n[1]=e("div",{class:"spacer"},null,-1)),e("div",{style:v(l(te))},g(l(S)("place")),5),e("div",{style:v(l(se))},g(l(S)("date")),5),n[2]||(n[2]=e("div",null,null,-1)),n[3]||(n[3]=e("div",null,null,-1)),n[4]||(n[4]=e("div",null,null,-1)),e("div",{style:v(l(te))},"www.ourchetype.com",4)],512)],512),e("div",{class:"bottom",style:v({backgroundColor:j.value})},[e("div",{class:"details-top",style:v({backgroundColor:j.value,backgroundImage:`url(${l(a)}/bg-footer-1.webp)`})},null,4),e("p",Ve,g(l(S)("instructions")),1),e("div",Xe,[e("div",Ue,[e("div",Ye,[e("div",Qe,[n[5]||(n[5]=e("div",{class:"number"},[e("h2",null,"1")],-1)),e("p",null,g(l(S)("1a")),1)]),e("div",{class:"box text",style:v({backgroundColor:j.value})},[e("p",qe,g((ne=i.value)==null?void 0:ne.root),1)],4)]),e("div",Ze,[e("div",et,[n[6]||(n[6]=e("div",{class:"number"},[e("h2",null,"2")],-1)),e("p",null,g(l(S)("2a")),1)]),e("img",{class:"box",src:l(a)+"/result-items/work_"+r.value.id+".webp",alt:"work "+r.value.id},null,8,tt)]),e("div",st,[e("div",nt,[n[7]||(n[7]=e("div",{class:"number"},[e("h2",null,"3")],-1)),e("p",null,g(l(S)("3a")),1)]),H(le,{class:"cta","bg-color":"black",dark:"",href:W.value.shadow.url,external:""},{default:Q(()=>[...n[8]||(n[8]=[ae(" Shadow ",-1)])]),_:1},8,["href"])])])]),H(le,{class:"cta",dark:"",disabled:!O.value,download:"Ourchetype.png",href:J.value},{default:Q(()=>[ae(g(l(S)("download")),1)]),_:1},8,["disabled","href"])],4)]}),_:1}))}});const ct=re(at,[["__scopeId","data-v-d8b7e51f"]]);export{ct as default};
