import{d as K,r,a as c,b as ae,p as Ee,o as x,c as W,f as l,n as u,F as q,h as he,_ as $,w as ge,e as se,t as j,u as D,g as Fe,m as ee,k as _e}from"./index-4fb2f70f.js";const ke="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAAgCAYAAACFM/9sAAAACXBIWXMAABYvAAAWLwESJu8cAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAA7dJREFUaIHtml9oW2UYh5/3S9Yc6ZxCK1KHimBF2MqEXCgISq+kpckpdcQ5L5QOGu8UvPAPSinixS7Vm9UxrBdbIWibnqSFihj0QlFKUZkoK5SK2MLYwDWdSW16Xi/aSJZ2bWLSnhzpA4F8/x9+kHPC932iqtSCiEhXV9fRYDDYBrSKSIuqtopIC9Cqqi1As6o2icidIhJU1SNAALgbkLIpi23bsQ4sl9W5wA1gXUSWVXVNVVdE5G/gpohcB66p6nURuaaqxfJiOp1e1BoDkErHx+PxQ0tLS4+p6nGgXUQeAdo3P3fUIuEhOWBORK64rju3+f1yW1vbD8PDw2uVTLBjgJFI5AQQEZFngDD+DapaciIyo6rTqppOpVI/3q7jlgC7u7uPBIPBfiAOPLrHon7hF+BcoVAYmZqauuUR8m+AIiKRSGQAeBe4Z/8dfcFVEXnHcZzzxWenqCqxWOxwPp//BOjzWNAXiMin+Xz+penp6ZtGRCSfz49wEF7FqOrJUCh0UUREotHoKVUd9VrKpzxnVDXutYWPiRugw2sLH9NhgJDXFj7GMsCC1xY+ZsEAX3ht4WM+NyJy0WsLH3PJTExMzKiq47WJ3xCRccdxZs1m4XU2diYOqIy/CoXCGwAGwHGcX0XkNW+d/IOqvjo5OXkFynZjotHoCPCiR15+4WPHcfqLBVPaYlnWGREZ338n35DKZrMDpRW3BJhIJNZDodALBy+VbUlms9lYJpMplFaa8l6JRCK3srLyLHBh39QaHFU9b1nWyUwmky9v23FL37btAVX9EGjaS8EGpgC87TjO2dt12PVQqbe393HXdUeBh+os1+jMq+rzqVTq+506bfkJl5NMJr8DjgNn2ThW/L+jwEeWZZ3YLTyo4lgTwLbtJ4H3VTVcg2AjM2OMeSWZTH5T6YCqAgQYGhoys7Ozp1X1PeCBag0blN+At1Kp1Gi1B+1VB1gkFos15XK5UyLyJv49/pwXkQ+Wl5eHt3vDVsJ/DrBILBYLrK6u9qnqy0AnW69qNBquqn4pIufC4fD44OCgW8tkNQdYim3bD7uu2y8ip4EH6zZxfVgALrmueyGdTs/Xa9K6BlhKT09P2BjTB9jAsT1ZZHcuAw7wmeM4s3uxwJ4FWIpt2/cCTwFPA0+o6jHAqvMyeRH52XXdb40xXwcCga/Gxsau1nmNLexLgOV0dnYGm5ub240xHWzc7roPuB84ysaVt8PAIeCuzSE3gDVgBfgT+AP4HVgE5oCfLMuaSyQS+/4/9R8iKoVHNt4CWgAAAABJRU5ErkJggg==",Me="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAXCAYAAACMLIalAAAACXBIWXMAABYvAAAWLwESJu8cAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAddJREFUSIm91r9qFFEUx/HPTF5AYoKJKfxT+KcKdtYiaBW7vISID5BOBS3UWISIlfgAAUUEX0FbUYgBIRFc0UQMKiK7eCxmVsbFzNzJbvKDU91zz/nOmTu/uVlEaKMsy3KcxSWcxmFMYwKb+IAO3uAJXkTE71ZNIiIpcAzLZcNoEZ1y39HkXgkw47iFny1hBuMXHmByKChcxJchYQZjCxd2BYWr6I0YqB9dXGkFhXt7BDMYi0lQ5YT2A6gfl2uhcL4c7X5CdXGuypH1fSrLsgNYU/hNG73DusKjJnAEx1vW+IQTEbEN1SndbPF033ANJ3c4k6dwvcxLrXnjn9encOUfiZuf4lCi4U7hWWLd75iuQi0mblzGWKozl7XHcD+x/p2/xwkbCRuetwWqgOXlhJt6rJc8ziQkf8XB3QBVwCaxndBrNsecZt2OiK2EvB0VEZ9xNyF1LldMqrYeHg0DVNHDsl6dZnPFF1KnVxHxfhREEbGB1w1pMzlmGpLWRgFU0duG9elccQDr9HFEMH11GtancsXvoU7rI4JJrbeZY6UmoYfHo+OhrNerWV+huO6u+r9nLAzjTTWetbBDv1WMV+/hS4r33cVLzO8FUAVsvuzTLfsuYTwi/AHH75kZn83CLgAAAABJRU5ErkJggg==",Ce="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAOCAYAAACl66WxAAAACXBIWXMAABYvAAAWLwESJu8cAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAS5JREFUOI3F1U0rhFEYxvHfsxm2rLBRlLAgrCwoSzVrZW8h38GeUoqNzTSfgthQYkFZW8rsmIUSytscizkjamaeR2a46+rUOaf7+p+3+wghQA8KKOMFJ8iHELRayMf8L9GvgJ44pg8lhDpaaTHIcgOfUuRQbDAh4A0LLQIZxWMTr6K4VY0mBFSwja5fgIzjOsWnLIX2q+6xiakfQAxhC88Z8j8mOMScn8UtTnEZV3wX+3PoxQimY5s1jmAGrxnI26l3zNS2c+mfYdZDCL6e76rqZf1rkAN0fIOJQIt4+kOQXXR++td5AQPYbzPEK9aQ++bd5FnO47gNIHuYqOuZoVZMYkN60WqmG+xIqVFJ7YPKEkmSDGIWYxhGP7qjKqr37UH1r7nCBc5wHkJ4T8v/AY/HlnK75JqXAAAAAElFTkSuQmCC";function E(_,s,e,p){return p&&(e=We(0,1,e)),_+(s-_)*e}function We(_,s,e){return Math.max(Math.min(e,s),_)}const Pe={key:0,src:Me},Xe={key:1,src:Ce},Ve={key:0,src:Me},Te={key:1,src:Ce},Ue="#cacaca",ze="#f2d219",Ye=K({__name:"PersonFace",props:{size:{},lookAt:{},coords:{},happiness:{},wonder:{},modEffectSource:{type:Function}},setup(_){const s=_,e=r(null),p=c(()=>s.size*.1),T=c(()=>1+s.wonder*1.5),A=c(()=>1+s.wonder),P=c(()=>1-s.wonder*.1),S=c(()=>s.size*.05),d=r({x:0,y:0});let U=-1,y=0,I=0;function w(){clearTimeout(U);let o=300+Math.random()*300;if(e.value){const m=s.lookAt,V=d.value;let i=y,B=I;if(typeof m=="number"){o*=E(.1,1,m);const b=Math.random();b>.6&&(b<E(.95,.6,m)?B=0:(B=Math.max(m,.8),i=Math.random()*2*Math.PI))}else{B=1;const b=e.value.getBoundingClientRect(),n=b.x+b.width/2,v=b.y+b.height/2;i=Math.atan2(m.y-v,m.x-n)}y=i,I=B;const H=Math.cos(i),G=Math.sin(i);V.x=H*B,V.y=G*B}setTimeout(w,o)}const f=r(!1);let F=-1;function X(o){o?(f.value=!1,clearTimeout(F)):F=setTimeout(()=>{f.value=!f.value,X()},f.value?200:1e4*(.1+Math.random()))}const h=c(()=>s.happiness>=Math.max(.5,s.wonder)),z=c(()=>s.happiness>=1?360:0),Y=c(()=>s.happiness>=1?1.2:1),O=c(()=>s.happiness>=1?ze:Ue),t=c(()=>s.wonder>=1);return ae(()=>{w(),X()}),Ee(()=>{clearTimeout(F)}),(o,m)=>(x(),W("div",{class:"face animated",style:u({width:o.size+"px",height:o.size+"px",transform:`rotate(${z.value}deg) scale(${Y.value})`,backgroundColor:O.value})},[l("div",{class:"mouth animated",style:u({width:"80%",height:"30%",left:"10%",bottom:"2%",transform:`
          translate(
          ${d.value.x*S.value}px,
          ${d.value.y*S.value}px)
          scaleX(${Math.max(o.happiness,o.wonder*.5)})
          scaleY(${Math.max(o.happiness,o.wonder*.5)})`})},m[0]||(m[0]=[l("img",{src:ke},null,-1)]),4),l("div",{ref_key:"eyesEl",ref:e,class:"eyes animated",style:u({width:"70%",left:"15%",top:"40%",transform:`translate(
          ${d.value.x*S.value}px,
          ${d.value.y*S.value}px)`})},[l("div",{class:"eye animated",style:u({width:p.value+"px",height:p.value+"px",transform:`scale(${T.value})`})},[h.value?(x(),W("img",Pe)):f.value&&!o.wonder?(x(),W("img",Xe)):(x(),W(q,{key:2},[l("div",{class:"eye-white animated",style:u({transform:`scale(${A.value})`})},null,4),l("div",{class:he(["eye-dot animated",{imagining:t.value}]),style:u({transform:`translate(
              ${d.value.x*S.value*.4}px,
              ${d.value.y*S.value*.4}px)
              scale(${P.value})`})},null,6)],64))],4),l("div",{class:"eye animated",style:u({width:p.value+"px",height:p.value+"px",transform:`scale(${T.value})`})},[h.value?(x(),W("img",Ve)):f.value&&!o.wonder?(x(),W("img",Te)):(x(),W(q,{key:2},[l("div",{class:"eye-white animated",style:u({transform:`scale(${A.value})`})},null,4),l("div",{class:he(["eye-dot animated",{imagining:t.value}]),style:u({transform:`translate(
              ${d.value.x*S.value*.5}px,
              ${d.value.y*S.value*.5}px)
              scale(${P.value})`})},null,6)],64))],4)],4)],4))}});const He=$(Ye,[["__scopeId","data-v-ded1896f"]]);function Be(_,s){return s*100+_}const Le={class:"centered-container top"},De={class:"name"},Oe=["src"],Je={class:"centered-container"},Ge={class:"content"},Ae=2e3,ye=.5,Re=K({__name:"PersonaSet",props:{gridCoords:{},id:{},size:{},happiness:{},wonder:{},params:{},isFocus:{type:Boolean},modEffectSource:{type:Function}},setup(_){const s="./",e=_,p={vision:{label:"Mage",speech:["Let's see","the many paths","ahead!"],color:"#7f1645"},joy:{label:"Muse",speech:["Let's find","joy!"],color:"#f5852a"},rule:{label:"Savior",speech:["Let's move","methodically"],color:"#dc1f26"},connection:{label:"Poet",speech:["Let's","hang out!"],color:"#0c72ed"}},T=r(4),A=c(()=>e.size*T.value),P=c(()=>e.size*((T.value-1)/2)),S=c(()=>`scaleX(${e.gridCoords.x>3?-1:1}) scaleY(${e.gridCoords.y<2?-1:1})`),d=c(()=>p[e.params.group]),U=r({coords:Object.assign({},e.gridCoords),attraction:.05,range:2.5}),y=r({coords:Object.assign({},e.gridCoords),attraction:1,range:2,forId:e.id}),I=r({coords:Object.assign({},e.gridCoords),attraction:1,range:2,happiness:1.1,forId:-1});let w=-1,f=-1;function F(){Y(),e.modEffectSource(y.value),e.modEffectSource(I.value),z(),w=setInterval(z,Ae)}const X=[{x:0,y:-1},{x:1,y:-1},{x:1,y:0},{x:1,y:1},{x:0,y:1},{x:-1,y:1},{x:-1,y:0},{x:-1,y:-1}];let h=-1;function z(){const{x:t,y:o}=e.gridCoords;h<0?h=Math.floor(Math.random()*X.length):(h+=2+Math.floor(Math.random()*3),h>X.length-1&&(h-=X.length));const m=X[h],V=y.value.coords,i=I.value;V.x=i.coords.x=t+m.x*ye,V.y=i.coords.y=o+m.y*ye,i.forId=-1,e.modEffectSource(i,!0),f=setTimeout(()=>{e.modEffectSource(i),i.forId=Be(t+m.x,o+m.y)},Ae/2)}function Y(){e.modEffectSource(y.value,!0),clearInterval(w),e.modEffectSource(I.value,!0),clearTimeout(f)}ge(()=>e.params.group,O,{immediate:!0}),ge(()=>e.params.isFocus,O,{immediate:!0});function O(){const t=U.value;e.modEffectSource(t,!0),delete t.attraction,delete t.happiness,delete t.spirit,delete t.wonder,delete t.lookAt,Y();const{isFocus:o}=e.params;switch(e.params.group){case"connection":t.range=1.5+(o?2:0),t.happiness=.1+(o?.1:0),t.attraction=.1+(o?.3:0);break;case"joy":t.range=1.5+(o?.5:0),t.happiness=.8+(o?.1:0),o&&F();break;case"rule":t.range=0+(o?6:0),t.spirit=.5+(o?.8:0),t.lookAt={x:1/0,y:0};break;case"vision":t.range=2.5+(o?2:0),t.wonder=.5+(o?.8:0),t.lookAt=.5+(o?.8:0);break}e.modEffectSource(U.value)}return se(()=>{U.value&&e.modEffectSource(U.value,!0),Y()}),(t,o)=>(x(),W("div",{class:"persona-set animated",style:u({width:A.value+"px",height:A.value+"px",transform:`translate(
      ${-P.value}px,
      ${-P.value}px)
      scale(${t.isFocus?1.1:1})`,fontSize:A.value*.15+"px"})},[l("div",Le,[l("div",De,j(t.params.name),1)]),l("img",{class:"image",src:D(s)+"persona/persona-"+t.params.group+".png"},null,8,Oe),l("div",Je,[l("div",{class:"label",style:u({color:d.value.color})},j(d.value.label),5)]),l("div",{class:"speech-container",style:u({transform:S.value})},[l("div",{class:"speech animated",style:u({transform:`scale(${t.isFocus?1:0})`})},[l("div",{class:"stem",style:u({backgroundColor:d.value.color})},null,4),l("div",{class:"bubble",style:u({backgroundColor:d.value.color,transform:S.value})},[l("div",Ge,[(x(!0),W(q,null,Fe(d.value.speech,(m,V)=>(x(),W("div",{key:V,class:"line"},j(m),1))),128))])],4)],4)],4)],4))}});const Ze=$(Re,[["__scopeId","data-v-bf314202"]]),qe=.4,Ke=K({__name:"PersonBase",props:{tWidth:{},tHeight:{},gridSizeBase:{},personParams:{},focusCoords:{},march:{},sources:{},modEffectSource:{type:Function}},setup(_){const s=_,e={x:s.gridSizeBase.x*s.tWidth,y:s.gridSizeBase.y*s.tHeight};function p(a){return a*e.x}function T(a){return a*e.y}const A=p(qe),P=c(()=>s.personParams.coords),S=c(()=>({x:p(P.value.x+.5),y:T(P.value.y+.5)})),d=c(()=>{var a;return((a=s.personParams.persona)==null?void 0:a.isFocus)||!1}),U=c(()=>{const a=s.personParams.persona;let g=a?1:.5;const k=s.focusCoords;if(k){const J=s.personParams.coords;Math.abs(J.x-k.x)<=1&&Math.abs(J.y-k.y)<=1?g=1:g=a?.3:.1}return g}),y=r(0),I=r(0),w=r(0);let f=r(0);const F=r({x:0,y:0});let X=setInterval(()=>{const{sources:a,personParams:g}=s,{id:k}=g,{x:J,y:oe}=g.coords;y.value*=.8,I.value*=.8,w.value*=.8;const R=F.value;R.x=0,R.y=0;let te=0,ne=0;for(let N=0;N<a.length;N++){const{forId:re,coords:ce,range:le,spirit:ie,wonder:ue,happiness:de,attraction:me,lookAt:be}=a[N];if(re&&k!=re)continue;const pe=oe-ce.y,ve=J-ce.x,fe=Math.sqrt(pe**2+ve**2);if(fe>=le)continue;const Z=1-Math.max(0,fe-1)**.8/le,Q=.8;let L=0;if(ue){const C=ue*Z;L=Math.max(L,C),C>I.value&&(I.value=E(I.value,C,Q))}if(ie){const C=ie*Z;L=Math.max(L,C),C>y.value&&(y.value=E(y.value,C,Q))}if(de){const C=de*Z;L=Math.max(L,C),C>w.value&&(w.value=E(w.value,C,Q))}if(me){const C=me*Z;L=Math.max(L,C),R.x-=ve*C,R.y-=pe*C}L>ne&&(ne=L,te=be||0)}f.value=te},500);const h=r({x:0,y:0}),z=r(0);let Y=-1;function O(){t(),Y=setInterval(()=>{const a=h.value,g=w.value*.05,k=w.value*5;a.x=E(-g,g,Math.random()),a.y=E(-g,g,Math.random()),z.value=E(-k,k,Math.random())},1e3+Math.random()*300)}function t(){clearInterval(Y)}const o=c(()=>E(0,.1,s.march+y.value,!0)*E(.8,1,Math.random())),m=c(()=>E(0,.2,s.march,!0)*E(.8,1,Math.random())),V=c(()=>E(2,.5,s.march+y.value,!0)*E(.8,1,Math.random())),i=r({x:0,y:0}),B=r(1),H=r(1),G=r("linear"),b=r("linear");let n=-1;function v(){const a=V.value,g=a/2,k=i.value,J=m.value;k.x=J,B.value=a,k.y=-o.value,H.value=g,b.value="ease-out",clearTimeout(n),n=setTimeout(()=>{k.y=0,b.value="ease-in",H.value=g,clearTimeout(n),n=setTimeout(()=>{k.x=-J,B.value=a,clearTimeout(n),n=setTimeout(v,a*1e3)},g*1e3)},g*1e3)}function M(){clearTimeout(n);const a=i.value;a.x=0,a.y=0,b.value="ease-out",H.value=.1}return ae(()=>{v(),O()}),se(()=>{M(),t(),clearInterval(X)}),(a,g)=>(x(),W("div",{class:"person-base animated",style:u({transform:`translate(${S.value.x}px, ${S.value.y}px)`,zIndex:a.personParams.persona?d.value?3:2:0,opacity:U.value})},[l("div",{class:"person animated",style:u({width:D(A)+"px",height:D(A)+"px",left:-D(A)/2+"px",top:-D(A)/2+"px"})},[l("div",{class:"lean animated",style:u({transform:`translate(
          ${p(F.value.x)}px,
          ${T(F.value.y)}px)`,transitionDuration:"5s"})},[l("div",{class:"march-x animated",style:u({transform:`translate(
            ${p(i.value.x)}px)`,transitionTimingFunction:G.value,transitionDuration:B.value+"s"})},[l("div",{class:"march-y animated",style:u({transform:`translateY(
              ${p(i.value.y)}px)`,transitionTimingFunction:b.value,transitionDuration:H.value+"s"})},[l("div",{class:"wiggle",style:u({transform:`rotate(${z.value}deg)
                translate(
                ${p(h.value.x)}px,
                ${p(h.value.y)}px)`})},[a.personParams.persona?(x(),ee(Ze,{key:1,id:a.personParams.id,"grid-coords":P.value,size:D(A),"look-at":D(f),wonder:I.value,happiness:w.value,params:a.personParams.persona,"is-focus":d.value,"mod-effect-source":a.modEffectSource},null,8,["id","grid-coords","size","look-at","wonder","happiness","params","is-focus","mod-effect-source"])):(x(),ee(He,{key:0,size:D(A),"look-at":D(f),coords:a.personParams.coords,"focus-coords":a.focusCoords,wonder:I.value,happiness:w.value,"mod-effect-source":a.modEffectSource},null,8,["size","look-at","coords","focus-coords","wonder","happiness","mod-effect-source"]))],4)],4)],4)],4)],4)],4))}});const $e=$(Ke,[["__scopeId","data-v-4607c967"]]),xe=7,Se=5,Ie=8e3,Ne=2e3,we=1,Qe=K({__name:"DisplayView",setup(_){const s=r(0),e=r(0),p=c(()=>.05*s.value),T=c(()=>.09*e.value),A=c(()=>s.value+p.value*2),P=c(()=>e.value+T.value*2),d=r([{group:"connection",name:"Eli"},{group:"joy",name:"Cintya"},{group:"vision",name:"Novia"},{group:"vision",name:"Ganjar Radika"},{group:"connection",name:"Novianti"},{group:"rule",name:"Ibrahim Indra"}]).value;let U=0;const y=r([]),I=y.value,f=r([]).value;for(let n=0;n<Se;n++)for(let v=0;v<xe;v++){const M={id:Be(v,n),coords:{x:v,y:n},persona:null};n%2&&v%2&&(M.persona=d[U],U++,f.push(M)),I.push(M)}let F=0,X=-1,h=-1;const z=r(null);function Y(){const n=f[F];z.value=n.coords;const v=n.persona;v.isFocus=!0,clearTimeout(h),h=setTimeout(()=>{delete v.isFocus,z.value=null,F++,F>=f.length&&(F=0)},Ie)}function O(){t(),Y(),X=setInterval(Y,Ie+Ne)}function t(){F=0,clearInterval(X),clearTimeout(h),f.forEach(n=>{delete n.persona.isFocus})}const o=r([]);function m(n,v){const M=o.value;if(!v)M.push(n);else{const a=M.indexOf(n);a>=0&&M.splice(a,1)}}const V=c(()=>{let n=0;const v=o.value;for(let M=0;M<v.length;M++){const{spirit:a}=v[M];a&&(n+=a*.2)}return n}),i=r(0),B=r(we);let H=-1;function G(){clearInterval(H),H=setInterval(()=>{const n=V.value*10;i.value-=n,i.value<-200&&(B.value=0,i.value+=200+n,setTimeout(()=>{i.value-=n,B.value=we},1))},B.value*1e3)}function b(){document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen()}return ae(()=>{s.value=document.documentElement.clientWidth,e.value=document.documentElement.clientHeight,O(),G()}),se(()=>{t(),clearInterval(H)}),(n,v)=>s.value?(x(),W("div",{key:0,class:"persona-view",style:{width:"100vw",height:"100vh"},onDblclick:b},[l("div",{class:"container",style:u({width:A.value+"px",height:P.value+"px",transform:`translate(${-p.value}px,${-T.value}px)`})},[(x(!0),W(q,null,Fe(y.value,(M,a)=>(x(),ee($e,{key:a,"t-width":A.value,"t-height":P.value,"grid-size-base":{x:1/xe,y:1/Se},"person-params":M,"focus-coords":z.value,march:V.value,sources:o.value,"mod-effect-source":m},null,8,["t-width","t-height","grid-size-base","person-params","focus-coords","march","sources"]))),128))],4)],32)):_e("",!0)}});const ea=$(Qe,[["__scopeId","data-v-46a7af03"]]);export{ea as default};
