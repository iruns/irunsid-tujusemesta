import{_ as X}from"./PageContainer.vue_vue_type_style_index_0_lang-d64e7345.js";import{d as G,b as K,g as U,x as W,c,r as Y,y as L,C as Z,A as ee,m as se,w,o as i,e as o,u as l,v as m,a as r,t as v,s as x,q as I,F as N,n as te,z as R,h as S,S as ne,k as A,J as oe}from"./index-a8951481.js";import{B as V}from"./BasicButton-09dc138b.js";import{q as ie}from"./questions-b47298ad.js";import{u as ae}from"./math-62bd5f2f.js";/* empty css                                                                    */const ce={key:0,class:"instruction"},re={class:"step-number"},le=["onTouchstart"],ue={class:"answers"},de=o("div",{class:"line"},null,-1),ve=o("div",{class:"dot"},null,-1),_e={key:0,class:"label"},he=["onClick"],fe=o("div",{class:"circle"},null,-1),me=[fe],pe={class:"nav-row"},ge="scene-mix/area-3-icons.webp",qe=G({__name:"SceneMixPage",setup(ye){const k=K(),$=U(),z=W(),D=c(()=>z.lang),a=Y.currentRoute.value.meta.questionSettings,_=a.questionIdx,F=c(()=>{const e=[a];for(let s=1;s<(a.nQuestions||1);s++)e.push(Object.assign({},a,{questionIdx:_+s}));return e}),b=c(()=>{const e=[];for(let s=0;s<(a.nQuestions||1);s++)e.push(oe[_+s]);return e}),P=a.nQuestions||1,p=c(()=>{let e=[];const s=ie[a.areaIdx];for(let t=0;t<P;t++)e.push(s[_+t]);return e}),h=c(()=>F.value.map(e=>k.getQuestionHistory(e))),f=c(()=>h.value.map(e=>e.sas[0])),j=c(()=>{for(let e=0;e<f.value.length;e++)if(f.value[e]==null)return!1;return!0});function g(e,s){const t=h.value[e];t.sas[0]=s,k.updateQuestionScores(t,p.value[e])}const C=L(null),E=L(null);let q=0,B=0,u=-1,T=-1;Z(()=>{const e=C.value.getClientRects()[0],s=E.value.getClientRects()[0];q=s.left-e.left,B=s.right-e.left,b.value.forEach((t,n)=>{t.initial&&h.value[n].sas[0]==null&&g(n,t.initial)})});function H(e){u=e,T=p.value[u].answers.length-1,window.addEventListener("touchend",Q),window.addEventListener("touchmove",M)}function J(e){const s=e.changedTouches[0];if(s){const t=ae(q,B,s.clientX,!0);u>=0&&g(u,Math.round(t*T))}}const M=ee.debounce(J,30);function Q(){u=-1,window.removeEventListener("touchend",Q),window.removeEventListener("touchmove",M)}const O=[{},{}];return(e,s)=>(i(),se(X,{"inner-class":{"scene-mix-page":!0}},{default:w(()=>[o("div",{ref_key:"interfaceEl",ref:C,class:"interface"},[l(m)("instruction")?(i(),r("div",ce,v(l(m)("instruction")),1)):x("",!0),o("div",{ref_key:"questionsEl",ref:E,class:"questions"},[o("div",re,v(l(m)("number")),1),(i(!0),r(N,null,I(p.value,(t,n)=>(i(),r("div",{key:n,class:"question",onTouchstart:y=>H(n)},[o("div",ue,[de,(i(!0),r(N,null,I(t.answers,(y,d)=>(i(),r("div",{key:d,class:te(["answer",{selected:h.value[n].sas.includes(d)}]),style:R(O[d])},[ve,S(ne,{class:"icon",src:ge,"x-sprites":12,"y-sprites":8,x:d,y:l(_)+n},null,8,["x","y"]),b.value[n].showAnswerLabel?(i(),r("div",_e,v(y.text[D.value]),1)):x("",!0),o("div",{class:"hit-rect",onClick:we=>g(n,d)},null,8,he)],6))),128)),f.value[n]!=null?(i(),r("div",{key:0,class:"selection",style:R({left:f.value[n]/(t.answers.length-1)*100+"%"})},me,4)):x("",!0)])],40,le))),128))],512),o("div",pe,[S(V,{class:"back-button",onClick:l($).onBack,secondary:""},{default:w(()=>[A(v("<<"))]),_:1},8,["onClick"]),S(V,{class:"next-button",disabled:!j.value},{default:w(()=>[A(v(l(m)("continue","general")),1)]),_:1},8,["disabled"])])],512)]),_:1}))}});export{qe as default};
