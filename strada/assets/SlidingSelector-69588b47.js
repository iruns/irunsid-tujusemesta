import{d as T,z as p,l as r,B as I,L as A,M as z,o as l,c as d,F as D,q as M,f as g,a as n,m as R,S as Y,s as S,t as x,D as F,p as N,i as P,_ as V}from"./index-8346732f.js";import{u as _}from"./math-6b78f75a.js";const h=c=>(N("data-v-5cc3bc00"),c=c(),P(),c),X=h(()=>n("div",{class:"line"},null,-1)),q={class:"image"},$=h(()=>n("div",{class:"dot"},null,-1)),j={class:"label"},G=["onClick"],H=h(()=>n("div",{class:"circle"},null,-1)),J=[H],K=T({__name:"SlidingSelector",props:{lang:{},idx:{},vertical:{type:Boolean},anchor:{},iconsSrc:{},iconsY:{},selection:{},answers:{},selectAnswer:{type:Function},showAnswerLabel:{type:Boolean}},setup(c){const o=c,a=p(!1),y=r(()=>o.answers.length-1),u=p(0),m=r(()=>(a.value?u.value:o.selection/(o.answers.length-1))*100),b=r(()=>o.vertical?"auto":m.value+"%"),k=r(()=>o.vertical?m.value+"%":"auto");function E(e){a.value=!0,v(e),window.addEventListener("touchend",f),window.addEventListener("touchmove",v)}const w=p(null),t={left:0,right:0,top:0,bottom:0};I(()=>{const e=w.value.getClientRects()[0];t.left=e.left,t.right=e.right,t.top=e.top,t.bottom=e.bottom,A(()=>{if(o.anchor){const s=o.anchor.getClientRects()[0];t.left-=s.left,t.right-=s.left,t.top-=s.top,t.bottom-=s.top}})});function v(e){const s=e.changedTouches[0];s&&a.value&&(u.value=o.vertical?_(s.clientY,t.top,t.bottom,!0):_(s.clientX,t.left,t.right,!0),B())}function L(){const e=Math.round(u.value*y.value),s=o.answers[e];o.selectAnswer(o.idx,s.idx)}const B=z.debounce(L,30);function f(){a.value=!1,window.removeEventListener("touchend",f),window.removeEventListener("touchmove",v)}return(e,s)=>(l(),d("div",{ref_key:"rootEl",ref:w,class:g(["sliding-selector",{labeled:e.showAnswerLabel,horizontal:!e.vertical,vertical:e.vertical}]),onTouchstart:E},[X,(l(!0),d(D,null,M(e.answers,(C,i)=>(l(),d("div",{key:i,class:g(["answer",{selected:i==e.selection}])},[n("div",q,[$,e.iconsSrc?(l(),R(Y,{key:0,class:"icon",src:e.iconsSrc,"x-sprites":12,"y-sprites":8,x:e.answers[i].idx,y:e.iconsY},null,8,["src","x","y"])):S("",!0)]),n("div",j,x(C.text[e.lang]),1),n("div",{class:"hit-rect",onClick:O=>e.selectAnswer(e.idx,e.answers[i].idx)},null,8,G)],2))),128)),e.selection!=null?(l(),d("div",{key:0,class:"selection",style:F({left:b.value,top:k.value})},J,4)):S("",!0)],34))}});const W=V(K,[["__scopeId","data-v-5cc3bc00"]]);export{W as S};
