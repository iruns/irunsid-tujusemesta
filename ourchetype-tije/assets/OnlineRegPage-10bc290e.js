import{d as A,b as P,s as z,v as D,g as j,w as V,x as M,c,y as $,z as E,A as I,o as _,e as a,u as l,a as b,t as r,B as o,C as J,n as d,D as u,E as p,G as w,H as K,i as Z,F as G,h as H,k as Y,I as q,j as v,J as Q,K as S,_ as W}from"./index-9f3395d5.js";import{_ as X}from"./PageContainer.vue_vue_type_style_index_0_lang-893a7e70.js";const ee={key:0,class:"repeat-greeting"},ae=["placeholder"],le={class:"error-info"},ie=["placeholder"],ne={class:"error-info"},oe={for:"pria"},se={for:"wanita"},te=["placeholder"],re={class:"error-info"},de={class:"select-container"},ce={class:"placeholder",disabled:"",value:null},ue=["value"],me={class:"error-info"},ve=["placeholder"],_e={class:"error-info"},pe=A({__name:"OnlineRegPage",setup(ge){const t=P(),m=z(),h=D(),y=j(),U=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,e=V(Object.assign({},t.regData));M(t.regData,s=>{e.value=Object.assign({},s)},{deep:!0});const O=V(!1),x=c(()=>e.value.email?U.test(e.value.email.toLowerCase()):!1),k=c(()=>e.value.name&&e.value.name.length>=3&&e.value.name.length<=20),B=c(()=>Number(e.value.age)),L=c(()=>!!e.value.gender),g=c(()=>!!e.value.domicile),C=c(()=>e.value.info_from&&e.value.info_from.length>2),F=c(()=>e.value&&k.value&&x.value&&L.value&&B.value&&g.value&&C.value);async function R(){if(t.updateRegData(e.value),!h.codeIsValid){y.goForward();return}for(m.setLoadingOnline(v.OnlineReg,!0);h.codeIsValid==null;)await Q(100);await t.getNewestData((s,i)=>{const n=t.regData;!s&&!i?f():i!=null&&i.endTime?(m.setLoadingOnline(v.OnlineReg,!1),t.alertAndReplaceLocalData(()=>{t.replaceLocalRegData(s),t.replaceLocalResultData(i)})):n&&s&&(n.email!=s.email||n.name!=s.name)?m.addDialog({info:o("reuse_warning_1")+"</br></br>email: <b>"+S(s.email)+"</b></br>name: <b>"+S(s.name)+"</b></br></br>"+o("reuse_warning_2"),confirmationText:o("reuse_confirmation"),onConfirmation:f,cancellationText:o("reuse_cancellation"),onCancellation:()=>{m.setLoadingOnline(v.OnlineReg,!1)}}):f()}),m.setLoadingOnline(v.OnlineReg,!1)}async function f(){t.replaceLocalResultData(),await t.submitRegForm(e.value),m.setLoadingOnline(v.OnlineReg,!1),y.goForward()}const N=V(["Bali","Bandung","Bekasi","Bogor","Jakarta","Surabaya","Tangerang","Yogyakarta","Kota Lainnya"]);return $(()=>{t.updateRegData(e.value)}),(s,i)=>(_(),E(X,{"inner-class":{"registration full-width":!0}},{default:I(()=>[a("div",{class:d(["form",{checked:O.value}])},[l(t).isRepeating?(_(),b("p",ee,r(l(o)("repeat-greeting")),1)):J("",!0),a("div",{class:d(["field",{invalid:!l(k)}])},[u(a("input",{id:"name","onUpdate:modelValue":i[0]||(i[0]=n=>e.value.name=n),name:"name",placeholder:l(o)("name_placeholder"),class:"text"},null,8,ae),[[p,e.value.name]]),a("div",le,r(l(o)("name_error_info")),1)],2),a("div",{class:d(["field",{invalid:!l(x)}])},[u(a("input",{id:"email","onUpdate:modelValue":i[1]||(i[1]=n=>e.value.email=n),name:"email",placeholder:l(o)("email_placeholder"),class:"text"},null,8,ie),[[p,e.value.email]]),a("div",ne,r(l(o)("email_error_info")),1)],2),a("div",{class:d(["options",{invalid:!l(L)}])},[u(a("input",{id:"pria","onUpdate:modelValue":i[2]||(i[2]=n=>e.value.gender=n),name:"pria",type:"radio",value:"pria"},null,512),[[w,e.value.gender]]),a("label",oe,r(l(o)("gender_male")),1),u(a("input",{id:"wanita","onUpdate:modelValue":i[3]||(i[3]=n=>e.value.gender=n),name:"wanita",type:"radio",value:"wanita"},null,512),[[w,e.value.gender]]),a("label",se,r(l(o)("gender_female")),1)],2),a("div",{class:d(["field",{invalid:!l(B)}])},[u(a("input",{id:"age","onUpdate:modelValue":i[4]||(i[4]=n=>e.value.age=n),name:"age",placeholder:l(o)("age_placeholder"),class:"text"},null,8,te),[[p,e.value.age,void 0,{number:!0}]]),a("div",re,r(l(o)("empty_error_info")),1)],2),a("div",{class:d(["field",{invalid:!l(g)}])},[a("div",de,[u(a("select",{id:"domicile","onUpdate:modelValue":i[5]||(i[5]=n=>e.value.domicile=n),name:"domicile",class:d({empty:!l(g)})},[a("option",ce,r(l(o)("domicile")),1),(_(!0),b(G,null,Z(N.value,(n,T)=>(_(),b("option",{key:T,value:n},r(n),9,ue))),128))],2),[[K,e.value.domicile]])]),a("div",me,r(l(o)("empty_error_info")),1)],2),a("div",{class:d(["field",{invalid:!l(C)}])},[u(a("input",{id:"info-from","onUpdate:modelValue":i[6]||(i[6]=n=>e.value.info_from=n),name:"info-from",placeholder:l(o)("information_from_placeholder"),class:"text"},null,8,ve),[[p,e.value.info_from]]),a("div",_e,r(l(o)("information_from_error_info")),1)],2)],2),a("div",{onClick:i[7]||(i[7]=n=>O.value=!0)},[H(q,{disabled:!l(F),class:"cta","bg-color":"black",color:"white",replace:"","no-nav":"",onClick:R},{default:I(()=>[Y(r(l(o)("continue")),1)]),_:1},8,["disabled"])])]),_:1}))}});const be=W(pe,[["__scopeId","data-v-581e1dcd"]]);export{be as default};
