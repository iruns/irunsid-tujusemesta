import{d as O,M as s,j as N,k as P,a as i,e as f,F as k,l as E,m as G,o as l,w as U,t as H,p as M,q as J,_ as K}from"./index-5075c3f8.js";const Q=""+new URL("bean-454f42ce.png",import.meta.url).href,Y={class:"full beans"},Z={class:"ui full"},ee={class:"flow-buttons"},te=["onMousedown","onMouseup"],ne={class:"rects"},oe={class:"circles"},se=2,v=40,X=.1,$=.2,ae=O({__name:"BeansBlend",setup(re){const a=window.screen.width,c=window.screen.height,z=s.Engine,y=s.Common,B=s.Runner,I=s.Composite,p=s.Bodies,d=[],D=[];for(let n=0;n<se;n++){const t=z.create();d.push(t),t.gravity.y=.5;const e=B.create();B.run(e,t)}const C={restitution:.95,friction:.2,frictionAir:.02},_=Object.assign({isStatic:!0},C),F=v/2,V=[p.rectangle(a/2,0-F,a,v,_),p.rectangle(a/2,c+F-200,a,v,_),p.rectangle(0,c/2,v,c,_),p.rectangle(a,c/2,v,c,_)];d.forEach(n=>{I.add(n.world,V)});const m=N([]),u=.15*a*.5;d.forEach(n=>{for(let t=0;t<15;t++){const e=y.random(u,a-u),o=y.random(u,c-u-200),r=y.random(.8*u,1.2*u),g=p.circle(e,o,r,C),x={x:e,y:o,r,a:0,brightness:Math.random()*.3+.2,body:g,j:0,f:-1,hue:0,brightness2:0};m.value.push(x),I.add(n.world,g)}});const b=N({energy:.5,inspiration:.5});let h;function j(n,t){!t&&h==null&&(R(n),h=window.setInterval(()=>R(n),200)),t&&h!=null&&(clearInterval(h),h=void 0)}function R(n){const t=b.value;t[n]+=X;for(const e in t)t[e]/=1+X;for(let e=0;e<d.length;e++)d[e].gravity.y=.5-t.inspiration*.49}const w=s.Vector.create();let S;function T(){const n=m.value,t=b.value;for(let e=0;e<n.length;e++){const o=n[e];if(o.j=0,o.f>-1&&o.f--,o.brightness2=t.inspiration*3,Math.random()<.5)continue;let r=Math.random(),g="energy";for(const A in t){const L=t[A];if(r<=L){g=A;break}else r-=L}const x=o.body;switch(g){case"energy":if(Math.random()<.3)continue;o.j=1,w.x=Math.random()*$-$*.8,w.x*=.3,w.y=Math.random()*-$,G.Body.applyForce(x,x.position,w);break;case"inspiration":if(o.f>-1)break;o.f=3,o.hue=Math.round(y.random(-180,180));break}}S=window.setTimeout(T,2e3-b.value.energy*1500)}T();let W=!0;function q(){for(let n=0;n<m.value.length;n++){const t=m.value[n],e=t.body;t.x=e.position.x,t.y=e.position.y,t.r=e.circleRadius,t.a=e.angle*180/Math.PI}W&&requestAnimationFrame(q)}return q(),P(()=>{D.forEach(n=>{B.stop(n)}),window.clearInterval(h),window.clearTimeout(S),W=!1,d.forEach(n=>{s.World.clear(n.world,!1),s.Engine.clear(n)})}),(n,t)=>(l(),i("div",Y,[f("div",Z,[f("div",ee,[(l(!0),i(k,null,E(b.value,(e,o)=>(l(),i("div",{key:o,class:"flow-button",onMousedown:U(r=>j(o),["prevent"]),onMouseup:U(r=>j(o,!0),["prevent"])},H(o+": "+Math.round(e*100)/10),41,te))),128))])]),f("div",ne,[(l(),i(k,null,E(V,(e,o)=>f("div",{key:o,class:"rect",style:M({left:e.bounds.min.x+"px",width:e.bounds.max.x-e.bounds.min.x+"px",top:e.bounds.min.y+"px",height:e.bounds.max.y-e.bounds.min.y+"px"})},null,4)),64))]),f("div",oe,[(l(!0),i(k,null,E(m.value,(e,o)=>(l(),i("div",{key:o,class:"circle",style:M({transform:`translate(${e.x}px,${e.y}px) rotate(${e.a}deg)`,filter:`brightness(${1+(e.f>0?e.brightness2:0)}) hue-rotate(${e.f>0?e.hue:0}deg)`})},[f("img",{class:"circle-img",src:Q,style:M({top:-e.r+"px",left:-e.r+"px",width:e.r*2+"px",height:e.r*2+"px",filter:`brightness(${e.brightness})`})},null,4),e.f>0?(l(),i("div",{key:0,class:"ring",style:M({top:-e.r+"px",left:-e.r+"px",width:e.r*2+"px",height:e.r*2+"px"})},null,4)):J("",!0)],4))),128))])]))}});const le=K(ae,[["__scopeId","data-v-c3bc2c6b"]]);export{le as default};
