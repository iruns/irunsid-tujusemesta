import{d as I,z as r,l as u,B as T,L as A,o as a,c as d,F as z,q as D,f as _,a as o,m as Y,S as F,s as g,t as M,D as N,p as x,i as P,_ as V}from"./index-17ccf495.js";import{u as f}from"./math-6b78f75a.js";const h=n=>(x("data-v-da72eb17"),n=n(),P(),n),X=h(()=>o("div",{class:"line"},null,-1)),q={class:"image"},R=h(()=>o("div",{class:"dot"},null,-1)),$={class:"label"},j=["onClick"],G=h(()=>o("div",{class:"circle"},null,-1)),H=[G],J=I({__name:"SlidingSelector",props:{lang:{},idx:{},selection:{},iconsSrc:{},iconsY:{},vertical:{type:Boolean},answers:{},showAnswerLabel:{type:Boolean},selectAnswer:{type:Function}},setup(n){const s=n,c=r(!1),y=u(()=>s.answers.length-1),v=r(0),w=u(()=>(c.value?v.value:s.selection/(s.answers.length-1))*100),b=u(()=>s.vertical?"auto":w.value+"%"),k=u(()=>s.vertical?w.value+"%":"auto");function E(e){c.value=!0,p(e),window.addEventListener("touchend",S),window.addEventListener("touchmove",p)}const m=r(null),l=r();T(()=>{l.value=m.value.getClientRects()[0]});function p(e){const t=e.changedTouches[0];t&&c.value&&(v.value=s.vertical?f(t.clientY,l.value.top,l.value.bottom,!0):f(t.clientX,l.value.left,l.value.right,!0),B())}function L(){const e=Math.round(v.value*y.value),t=s.answers[e];s.selectAnswer(s.idx,t.idx)}const B=A.debounce(L,30);function S(){c.value=!1,window.removeEventListener("touchend",S),window.removeEventListener("touchmove",p)}return(e,t)=>(a(),d("div",{ref_key:"rootEl",ref:m,class:_(["sliding-selector",{labeled:e.showAnswerLabel,horizontal:!e.vertical,vertical:e.vertical}]),onTouchstart:E},[X,(a(!0),d(z,null,D(e.answers,(C,i)=>(a(),d("div",{key:i,class:_(["answer",{selected:i==e.selection}])},[o("div",q,[R,e.iconsSrc?(a(),Y(F,{key:0,class:"icon",src:e.iconsSrc,"x-sprites":12,"y-sprites":8,x:e.answers[i].idx,y:e.iconsY},null,8,["src","x","y"])):g("",!0)]),o("div",$,M(C.text[e.lang]),1),o("div",{class:"hit-rect",onClick:K=>e.selectAnswer(e.idx,e.answers[i].idx)},null,8,j)],2))),128)),e.selection!=null?(a(),d("div",{key:0,class:"selection",style:N({left:b.value,top:k.value})},H,4)):g("",!0)],34))}});const U=V(J,[["__scopeId","data-v-da72eb17"]]);export{U as S};
