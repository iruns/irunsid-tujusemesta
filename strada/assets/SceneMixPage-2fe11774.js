import{_ as $}from"./PageContainer.vue_vue_type_style_index_0_lang-773d846a.js";import{S as j}from"./SlidingSelector-4047fdb9.js";import{B as A}from"./BasicButton-4ed75a42.js";import{d as z,b as H,n as K,y as O,l as o,z as I,E as R,m as G,w,o as u,a as p,u as r,v as l,c as g,t as c,s as C,q as J,e as x,F as U,g as Q,x as W,K as X,A as Y}from"./index-05a25472.js";import{g as Z,b as E,a as ee}from"./beansAndBlends-68bc2c3c.js";import"./math-6b78f75a.js";const se={key:0,class:"instruction"},te={ref:"questionsEl",class:"questions"},ne={class:"step-number"},ae={key:0,class:"question-text"},oe={class:"nav-row"},N=4,re="scene-mix/area-3-icons.webp",pe=z({__name:"SceneMixPage",setup(le){const _=H(),h=K(),V=O(),M=o(()=>V.lang),q=I(null),a=o(()=>W.currentRoute.value.meta.questionSettings||null),i=o(()=>{var e;return((e=a.value)==null?void 0:e.questionIdx)||0}),b=o(()=>{if(!a.value||i.value==null)return null;const e=[a.value];for(let t=1;t<(a.value.nQuestions||1);t++)e.push(Object.assign({},a.value,{questionIdx:i.value+t}));return e}),F=o(()=>{const e=[];if(a.value)for(let t=0;t<(a.value.nQuestions||1);t++)e.push(X[i.value+t]);return e}),L=o(()=>{var e;return((e=a.value)==null?void 0:e.nQuestions)||1}),d=o(()=>{let e=[];if(a.value){const t=Y[a.value.areaIdx];for(let s=0;s<L.value;s++)e.push(t[i.value+s])}return e}),y=o(()=>b.value?b.value.map(e=>_.getQuestionHistory(e.areaIdx,e.questionIdx)):[]),m=o(()=>y.value.map((e,t)=>{const s=d.value[t].answers[e.sas[0]];if(s)return s.displayIdx!=null?s.displayIdx:s.idx||0})),D=o(()=>{for(let e=0;e<m.value.length;e++)if(m.value[e]==null)return!1;return!0});function P(e,t){const s=y.value[e];s.sas[0]=t,_.updateQuestionScores(s,d.value[e])}const v=I([]);return R(()=>{const e=d.value;let t=!1;for(let s=0;s<e.length;s++)if(e[s].answers.length>=N){t=!0;break}if(h.isLimitingAnswers||(t=!1),t){const s=Z(4,ee,E,_.progress.scores);for(let n=0;n<e.length;n++){const S=e[n];if(S.answers.length<=N)v.value[n]=e[n].answers;else{const k=[];v.value[n]=k;for(let f=0;f<s.length;f++){const T=E[s[f]],B=S.answers[T.idx];B.displayIdx=f,k.push(B)}}}}else for(let s=0;s<e.length;s++)v.value[s]=e[s].answers}),(e,t)=>(u(),G($,{"inner-class":{"scene-mix-page":!0}},{default:w(()=>[p("div",{ref_key:"interfaceEl",ref:q,class:"interface"},[r(l)("instruction")?(u(),g("div",se,c(r(l)("instruction")),1)):C("",!0),p("div",te,[p("div",ne,c(r(l)("number")),1),(u(!0),g(U,null,J(d.value,(s,n)=>(u(),g("div",{key:n,class:"question"},[r(l)("question")?(u(),g("p",ae,c(r(l)("question")),1)):C("",!0),x(j,{lang:M.value,idx:n,anchor:q.value,"icons-src":re,"icons-y":i.value+n,selection:m.value[n],answers:v.value[n],"select-answer":P,"show-answer-label":F.value[n].showAnswerLabel},null,8,["lang","idx","anchor","icons-y","selection","answers","show-answer-label"])]))),128))],512),p("div",oe,[x(A,{class:"back-button",secondary:"",onClick:r(h).onBack},{default:w(()=>[Q(c("<<"))]),_:1},8,["onClick"]),x(A,{class:"next-button",disabled:!D.value},{default:w(()=>[Q(c(r(l)("continue","general")),1)]),_:1},8,["disabled"])])],512)]),_:1}))}});export{pe as default};
